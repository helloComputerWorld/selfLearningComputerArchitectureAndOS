# Chapter07. 보조기억장치

## 07-1 다양한 보조기억장치

### 1. 하드 디스크

- 자기적인 방식으로 데이터를 저장하는 보조기억장치
- 플래터
  - 실질적으로 데이터가 저장되느 곳
  - 자기 물질로 덮여 있어 N극과 S극 저장 / 0과 1의 역할을 수행
  - 스핀들: 플래터를 회전시키는 구성 요소
  - 스핀들이 플래터를 돌리는 속도는 분당 회전수를 나타내는 RPM 단위로 표현함
  - 헤드
    - 플래터를 대상으로 데이터를 읽고 쓰는 구성 요소
    - 플래터 위에서 미세하게 떠 있는 채로 데이터를 읽고 쓰는, 바늘같이 생긴 부품
    - 원하는 위치로 헤드를 이동시키는 디스크 암에 부착되어 있음
- 많은 양의 데이터를 저장해야 하므로 일반적으로 여러 겹의 플래터로 이루어져 있음
- 플래터의 양면을 모두 사용할 수 있음
- 양면 플래터를 사용하면 위아래로 플래터당 두개의 헤드가 사용됨
- 모든 헤드는 디스크 암에 부착되어 다같이 이동함
- 플래터에 데이터가 저장되는 방식
  - 트랙과 섹터 단위로 데이터를 저장
  - 트랙: 플래터를 여러 동심원으로 나누었을 때 그중 하나의 원
  - 섹터: 여러 조각으로 나누어진 트랙의 한 조각 / 가장 작은 전송 단위
  - 실린더: 여러 겹의 플래터 상에서 같은 트랙이 위치한 곳을 모아 연결한 논리적 단위
  - 연속된 정보는 보통 한 실린더에 기록됨 -> 디스크 암을 움직이지 않고도 바로 데이터에 접근할 수 있기 때문
- 저장된 데이터에 접근하는 과정
  - 저장된 데이터에 접근하는 시간 -> 탐색 시간, 회전 지연, 전송 시간
  - 탐색 시간: 접근하려는 데이터가 저장된 트랙까지 헤드를 이동시키는 시간을 의미
  - 회전 지연: 헤드가 있는 곳으로 플래터를 회전시키는 시간을 의미
  - 전송 시간: 하드 디스크와 컴퓨터 간에 데이터를 전송하는 시간을 의미
  - 다량의 데이터를 탐색하고 읽어 들이는 시간은 생각보다 많음
  - 탐색 시간과 회전 지연을 단축시키기 위해서는 플래터를 빨리 돌려 RPM을 높이는 것도 중요하지만
  - 접근하려는 데이터가 플래터 혹은 헤드를 조금만 옮겨도 접근할 수 있는 곳에 위치하는 것도 중요
- 다중 헤드 디스크 & 고정 헤드 디스크
  - 단일 헤드 디스크: 플래터의 한 면당 헤드가 하나식 달려 있는 하드 디스크
  - 다중 헤드 디스크: 헤드가 트랙별로 여러 개 달려 있는 하드 디스크
  - 다중 헤드 디스크는 트랙마다 헤드가 있기 때문에 탐색 시간이 들지 않음 => 탐색시간=0
  - 다중 헤드 디스크 === 고정 헤드 디스크 -> 헤드를 움직일 필요 없음
  - 단일 헤드 디스크 === 이동 헤드 디스크 -> 헤드를 데이터가 있는 곳까지 움직여야 함

### 2. 플래시 메모리

- USB 메모리, SD 카드, SSD 모두 플래시 메모리 기반의 보조기억장치
- 전기적으로 데이터를 읽고 쓸 있는 반도체 기반의 저장 장치
- 일상적으로 접하는 거의 모든 전자 제품 안에 플래시 메모리가 내장되어 있다고 봐도 무방
- 셀
  - 플래시 메모리에서 데이터를 저장하는 가장 작은 단위
  - 셀이 모여서 MB, GB, TB 용량을 갖는 저장 장치가 됨
    - 하나의 셀에 몇 비트를 저장할 수 있느냐에 따라 플래시 메모리 종류가 나눠짐
    - 플래시 메모리의 수명, 속도, 가격에 영향을 미침
    - SLC 타입: 한 셀에 1비트를 저장할 수 있는 플래시 메모리
      - 한 셀로 두 개의 정보를 표현할 수 있음
      - MLC, TLC 타입에 비해 비트의 빠른 입출력이 가능 / 수명이 길어서 데이터를 쓰고 지우고를 많이 반복할 수 있음
      - 용량 대비 가격이 높음
      - 보통 기업에서 데이터를 읽고 쓰기가 매우 많이 반복되며 고성능의 빠른 저장 장치가 필요한 경우 사용
    - MLC 타입: 한 셀에 2비트를 저장할 수 있는 플래시 메모리
      - 한 셀로 4개의 정보를 표현할 수 있음
      - SLC 타입보다 일반적으로 속도, 수명은 떨어지지만 대용량화하기 유리함
      - SLC 타입보다 용량 대비 가격이 저렴함
      - 시중에서 사용되는 많은 플래시 메모리 저장 장치들이 MLC 타입(혹은 TLC 타입)으로 만들어짐
    - TLC 타입: 한 셀에 3비트를 저장할 수 있는 플래시 메모리
      - 한 셀로 8개의 정보를 표현할 수 있음
      - SLC, MLC 타입보다 수명과 속도가 떨어지지만 용량 대비 가격 저렴
- 셀 > 페이지 > 블록 > 플레인 > 다이
- 플래시 메모리에서 읽기 쓰기는 페이지 단위로 이루어짐
- 삭제는 블록 단위로 이루어짐
- 읽기/쓰기 단위와 삭제 단위가 다르다는 것이 플래시 메모리의 가장 큰 특징
- 페이지의 세 개의 상태
  - Free, Valid, Invalid
  - Free 상태: 어떠한 데이터도 저장하고 있지 않아 새로운 데이터를 저장할 있는 상태
  - Valid 상태: 이미 유효한 데이터를 저장하고 있는 상태
  - Invalid 상태: 쓰레기값이라고 부르는 유효하지 않은 데이터를 저장하고 있는 상태
  - 하드디스크와 달리 덮어쓰기가 불가능하여 Valid 상태인 페이지에는 새 데이터를 저장할 수 없음

## 07-2 RAID의 정의와 종류

### 1. RAID의 정의

- 하드 디스크와 SSD를 사용하는 기술로, 데이터의 안전성 혹은 높은 성능을 위해 여러 개의 물리적 보조기억장치를 하나의 논리적 보조기억장치처럼 사용하는 기술을 의미함

### 2. RAID의 종류

- RAID 레벨: RAID 구성 방법
- 대표적으로 RAID 0, RAID 1, RAID 2, RAID 3, RAID 4, RAID 5, RAID 6 있고, 파생된 RAID 10, RAID 50 등이 있음
- RAID 0
  - 여러 개의 보조기억장치에 데이터를 단순히 나누어 저장하는 방식
  - 데이터를 저장할 때 각 하드 디스크는 번갈아 가며 데이터를 저장함
  - 저장되는 데이터가 하드 디스크 개수만큼 나뉘어 저장되는 것
  - 스트라입: 분산되어 저장된 데이터
  - 스트라이핑: 분산하여 저장하는 것
  - 스트라이핑되면 저장된 데이터를 읽고 쓰는 속도가 빨라짐
  - 하나의 대용량 저장 장치를 이용했더라면 여러 번에 걸쳐 읽고 썼을 데이터를 동시에 읽고 쓸 있기 때문
  - 단점: 저장된 정보가 안전하지 않음 -> 하나에 문제가 생긴다면 다른 모든 하드 디스크의 정보를 읽는 데 문제가 생길 수 있음
- RAID 1
  - 복사본을 만드는 방식 => 미러링
  - RAID 0처럼 데이터 스트라이핑이 사용되고, 동일하게 복사된 형태
  - 데이터를 쓸 때는 원본과 복사본 두 군데에 씀 -> RAID 0 보다 느림
  - 장점: 복구가 매우 간단
  - 단점: 하드 디스크 개수가 한정되었을 때 사용 가능한 용량이 적어짐
- RAID 4
  - RAID 1처럼 완전한 복사본을 만드는 대신 오류를 검출하고 복구하기 위한 정보를 저장한 장치를 두는 구성 방식
  - 패리티 비트: 오류를 검출하고 복구하기 위한 정보
  - 패리티를 저장한 장치를 이용해 다른 장치들의 오류를 검출하고, 오류가 있다면 복구
  - RAID 4는 RAID 1보다 적은 하드 디스크로도 데이터를 안전하게 보관할 수 있음
  - 단점: 새로운 데이터가 저장될 때마다 패리티를 저장하는 디스크에도 데이터를 쓰게되므로 패리티를 저장하는 장치에 병목 현상이 발생함
- RAID 5
  - 패리티 정보를 분산하여 저장하는 방식 -> RAID 4의 병문 현상을 해소함
- RAID 6
  - 기본적으로 RAID 5와 같지만, 서로 다른 두 개의 패리티를 두는 방식
  - 오류를 검출하고 복구할 수 있는 수단이 2개
  - RAID 4, RAID 5보다 안전한 구성이라고 볼 수 있음
  - 저장할 때마다 저장할 패리티가 2개이므로, 쓰기 속도는 RAID 5보다 느림
  - 데이터 저장 속도를 조금 희생하더라도 데이터를 안전하게 보관하고 싶을 때 사용하는 방식
- 어떤 상황에서 무엇을 최우선으로 원하는지에 따라 최적의 RAID 레벨은 달라질 수 있음
